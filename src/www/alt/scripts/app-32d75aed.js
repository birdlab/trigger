"use strict";var app=angular.module("trigger",["angular-loading-bar","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMaterial","btford.socket-io","luegg.directives","angularMoment","ngMdIcons","cfp.hotkeys","vs-repeat","pascalprecht.translate","react"]);app.config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("teal").accentPalette("orange")}]).config(["cfpLoadingBarProvider",function(t){t.includeSpinner=!1}]),app.run(["amMoment",function(t){t.changeLocale("ru")}]),app.directive("ngEnter",function(){return function(t,e,a){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(a.ngEnter,{event:e})}),e.preventDefault())})}}),app.factory("socket",["$rootScope",function(t){var e=io.connect("http://trigger.fm");return{on:function(a,s){e.on(a,function(){var a=arguments;t.$apply(function(){s.apply(e,a)})})},emit:function(a,s,n){e.emit(a,s,function(){var a=arguments;t.$apply(function(){n&&n.apply(e,a)})})}}}]),app.run(["$rootScope","Client","socket",function(t,e,a){function s(a){a.error?console.log(a.error):(e.user=a.user,t.userId=a.user.id,t.load.signed=!0)}t.load={signed:!1,welcome:!1,playlist:!1};var n=localStorage.getItem("username"),i=localStorage.getItem("password");t.title="Trigger",t.userId=0,e.init(location.host),a.on("welcome",function(a){e.channel=a.channels[0],e.getChannels(function(t){e.channels=t.channels,void 0!==n&&void 0!==i&&e.login(n,i,s)}),e.goChannel(1,console.log("Q",a)),t.load.welcome=!0}),t.client=e}]),app.service("Client",["$log",function(){this.version=2205,this.user=null,this.channel={},this.callbacks={},this.chat=null,this.trackscache=[],this.init=function(){console.log("init"),this.socket=io("http://trigger.fm");var t=this.socket,e=this;t.on("getver",function(){t.emit("ver",{v:e.version,init:!0})}),t.on("channeldata",function(){}),t.on("history",function(t){e.callbacks.history(t)}),t.on("channelsdata",function(t){e.channels=t.channels,e.callbacks.channelsdata(t)}),t.on("userdata",function(t){e.callbacks.userdata(t)}),t.on("uvd",function(t){e.callbacks.uvotedata(t)}),t.on("invitestatus",function(t){e.callbacks.invitestatus(t)}),t.on("recoverstatus",function(t){e.callbacks.recover(t)}),t.on("changepass",function(t){e.callbacks.changepass(t)}),t.on("playlist",function(t){e.callbacks.playlist(t)}),t.on("loginstatus",function(t){if(t.error){"nouser"===t.error&&(t.error="Нет такого пользователя"),"wrongpass"===t.error&&(t.error="Не тот пароль")}else e.user=t.user,e.user.t<0&&(e.user.t=0),e.user.nt=new Date(Date.parse(new Date)+e.user.nt);e.callbacks.loginstatus(t)}),t.on("disconnect",function(){e.user=null,e.channel={},e.callbacks={},e.chat=null}),t.on("tags",function(t){e.callbacks.tags(t.t)})},this.login=function(t,e,a){var s=this;s.callbacks.loginstatus=a,this.socket.emit("login",{u:t,p:e})},this.track=function(t,e){var a=this,s=!1;if(t===a.channel.current.id){if(!e)return a.channel.current;e(a.channel.current),s=!0}for(var n in a.channel.pls)if(a.channel.pls[n].id===t){if(!e)return a.channel.pls[n];e(a.channel.pls[n]),s=!0}!s&&e&&this.socket.emit("gettrack",{id:t},function(t){e(t)})},this.getPlaylist=function(t,e){cl=this,cl.callbacks.playlist=e,this.socket.emit("getplaylist",{id:t})},this.goChannel=function(t,e){var a=this;a.callbacks.channeldata=e,this.socket.emit("gochannel",{id:t})},this.getChannels=function(t){var e=this;e.callbacks.channelsdata=t,this.socket.emit("getchannels")},this.tracksubmit=function(t,e){var a=t.form;this.socket.emit("tracksubmit",{chid:this.channel.id,track:t.track},function(t){t.form=a,console.log("data.form: ",t.form),e(t)})},this.adduservote=function(t,e){this.user&&(this.callbacks.uvotedata=e,this.socket.emit("uvote",t))},this.getUser=function(t,e){this.socket.emit("getuser",t,e)},this.getTags=function(t,e){cl=this,cl.callbacks.tags=e,this.socket.emit("gettags",{s:t})},this.getTrackTags=function(t,e,a){cl=this,cl.callbacks.tags=a,this.socket.emit("gettags",{a:t,t:e})},this.addTag=function(t,e){cl=this,cl.callbacks.tags=e,this.socket.emit("addtag",{s:t})},this.killtrack=function(t){cl=this,this.socket.emit("deltrack",{tid:t,chid:cl.channel.chid})},this.sendinvite=function(t,e,a){cl=this,cl.callbacks.invitestatus=a,this.socket.emit("sendinvite",{m:t,c:e})},this.sendextinvite=function(t,e){this.socket.emit("sendextinvite",t,e)},this.logout=function(t){this.socket.emit("logout",{s:!0},t)},this.recover=function(t,e){cl=this,cl.callbacks.recover=e,this.socket.emit("recover",{m:t})},this.changepass=function(t,e,a){var s=this;s.callbacks.changepass=a,this.socket.emit("changepass",{o:t,n:e})},this.updateUserData=function(t){this.socket.emit("upduserdata",t)},this.updateTrack=function(t){this.socket.emit("updtrack",t)},this.getchannel=function(t){for(var e in this.channels)if(this.channels[e].id===t)return this.channels[e];return!1},this.banuser=function(t,e,a){console.log(e),this.socket.emit("banuser",{id:t,r:e},a)},this.unbanuser=function(t,e){this.socket.emit("unbanuser",{id:t},e)},this.setop=function(t,e){this.socket.emit("setop",t,e)},this.removeop=function(t,e){this.socket.emit("removeop",t,e)},this.setprops=function(t,e){this.socket.emit("setprops",t,e)},this.sendPRVote=function(t,e){this.socket.emit("prvote",t,e)}}]),app.config(["$translateProvider",function(t){t.translations("en",{loginUsername:"Username",loginPassword:"Password",loginSubmit:"Yarrr!",consoleLogIn:"Log in",consoleListeners:"Listeners",consoleActiveUsers:"Active users",consoleYouCanUpload:"You can upload",consoleDonateMe:"Donate",consoleChangeTheme:"Change theme",consoleRTFM:"RTFM",consoleLogOut:"Log out",infoTabChat:"Chat",infoTabHistory:"History",infoTabDemocracy:"Democracy",infoTabProfile:"Profile",democracyElections:"Elections",democracyCandidate:"Candidate ID",democracyVoted:"You voted for",democracyVote:"Vote",democracyTabModer:"Moder",democracyTabBlog:"Blogs",startTyping:"type your message here...",chatBold:"bold",chatIrony:"irony",chatTink:"tink",chatImg:"images",onlineHere:"Here",historyGold:"gold",historyArtist:"Artist",historyTitle:"Title",historyNoResults:"No results ):",trackUploadedBy:"uploaded by ",trackToChat:"send to chat",profileUser:"User",profileUploads:"Uploads",profilePluses:"Pluses",profileMinuses:"Minuses",profileSettings:"Settings",userBan:"Ban",userIgnore:"Ignore",userInvitedBy:"Invited by",userInvite:"Invited",userRegDate:"Registered",settingsLogOut:"Log out",settingsTink:"Tink",settingsImg:"Show images",settingsFemale:"Yahooo! I am woman",settingsOldPassword:"Old password",settingsNewPassword:"New password",settingsNewPasswordAgain:"Type new password again",settingsNewPasswordSumbit:"Change password!"}),t.translations("ru",{loginUsername:"Логин",loginPassword:"Пароль",loginSubmit:"Трям!",consoleLogIn:"Войти",consoleListeners:"Слушают",consoleActiveUsers:"из них активно",consoleYouCanUpload:"Ты можешь залить",consoleDonateMe:"Жертвенник",consoleChangeTheme:"Сделать день",consoleRTFM:"Мануал",consoleLogOut:"Выйти",infoTabChat:"Чат",infoTabHistory:"История",infoTabDemocracy:"Демократия",infoTabProfile:"Профиль",democracyElections:"Выборы",democracyCandidate:"ID кандидата",democracyVoted:"Ты проголосовал за",democracyVote:"Голосовать",democracyTabModer:"Модер",democracyTabBlog:"Блоги",startTyping:"начинай вводить...",chatBold:"bold",chatIrony:"irony",chatTink:"тиньк",chatImg:"картинки",onlineHere:"Здесь",historyGold:"Золото",historyArtist:"Исполнитель",historyTitle:"Трек",historyNoResults:"Нет результатов",trackUploadedBy:"прнс",trackToChat:"в чат",profileUser:"Юзер",profileUploads:"Загрузки",profilePluses:"Плюсы",profileMinuses:"Минусы",profileSettings:"Настройки",userBan:"Забанить",userIgnore:"ОМММ",userInvitedBy:"По приглашению",userInvite:"Понаприглашал",userRegDate:"С нами с",settingsLogOut:"Выйти",settingsTink:"Тинькать",settingsImg:"Показывать картинки",settingsFemale:"Ура, я женщина!",settingsOldPassword:"Старый пароль",settingsNewPassword:"Новый пароль",settingsNewPasswordAgain:"Новый пароль еще раз",settingsNewPasswordSumbit:"Я понимаю что делаю!"}),t.registerAvailableLanguageKeys(["en","ru"],{en_US:"en",en_UK:"en",ru_RU:"ru"}),t.preferredLanguage("en"),t.fallbackLanguage("en")}]),angular.module("trigger").controller("UserCtrl",["$scope","$rootScope","Client",function(t,e,a){function s(){}t.user={},t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&a.getUser({id:e.userId},function(s){void 0===a.user.g&&e.userId===a.user.id&&(a.user.g=s.g),s.karma=s.p.length-s.n.length,s.vote=void 0;for(var n in s.p)if(s.p[n].vid==a.user.id){s.vote="plus";break}for(var n in s.n)if(s.n[n].vid==a.user.id){s.vote="minus";break}t.user=s,t.$digest()}),t.load.signed=e.load.signed},!0),t.$watch(function(){return e.userId},function(){var s=e.userId;0===s&&(s="0"),a.getUser({id:s},function(e){e.karma=e.p.length-e.n.length,e.vote=void 0;for(var s in e.p)if(e.p[s].vid==a.user.id){e.vote="plus";break}for(var s in e.n)if(e.n[s].vid==a.user.id){e.vote="minus";break}t.user=e,t.$digest()})},!0),t.userVoteDown=function(e){var n=-1;"minus"===t.user.vote&&(n=0),a.adduservote({v:n,id:e},s),0===n?(t.user.vote="",t.user.karma++):(t.user.vote="minus",t.user.karma--)},t.userVoteUp=function(e){var n=1;"plus"===t.user.vote&&(n=0),a.adduservote({v:n,id:e},s),0===n?(t.user.vote="",t.user.karma--):(t.user.vote="plus",t.user.karma++)}}]),angular.module("trigger").controller("UploadsCtrl",["$scope","$rootScope","Client",function(t,e,a){t.tracks=[],t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&a.getUser({id:e.userId,uplshift:0},function(e){t.tracks=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("UploadCtrl",function(){}),angular.module("trigger").controller("SettingsCtrl",["$scope","Client","md5","$mdToast","$animate",function(t,e,a,s){t.gender=!e.user.g,t.changeGender=function(){e.user.g=1==t.gender?!1:!0,e.updateUserData({g:!t.gender})},t.toastPosition={bottom:!1,top:!0,left:!1,right:!0},t.getToastPosition=function(){return Object.keys(t.toastPosition).filter(function(e){return t.toastPosition[e]}).join(" ")},t.oldPassword="",t.newPassword="",t.newPasswordFix="",t.changePassword=function(){if(t.newPassword.length>0&&t.newPassword===t.newPasswordFix){var n=a.createHash(t.oldPassword),i=a.createHash(t.newPassword);e.changepass(n,i,function(e){console.log(e),s.show(e.ok?s.simple().content("Все получилось!").position(t.getToastPosition()).hideDelay(3e3):s.simple().content("Что-то пошло не так!").position(t.getToastPosition()).hideDelay(3e3))})}else s.show(s.simple().content("Пароли не совпадают!").position(t.getToastPosition()).hideDelay(3e3))}}]),angular.module("trigger").controller("PlusesCtrl",["$scope","$rootScope","Client",function(t,e,a){t.tracks=[],t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&a.getUser({id:e.userId,uplshift:0,p:!0},function(e){t.tracks=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("PlaylistCtrl",["$scope","$rootScope","$mdSidenav","Client","socket","$interval","hotkeys","$q",function(t,e,a,s,n,i,o){function l(){for(var e=t.playlist.length,a=0;e>a;a++){for(var n in t.playlist[a].p)if(t.playlist[a].p[n].vid===s.user.id){t.playlist[a].vote=s.user.w;break}for(var n in t.playlist[a].n)if(t.playlist[a].n[n].vid===s.user.id){t.playlist[a].vote=-s.user.w;break}}for(var n in t.track.p)if(t.track.p[n].vid===s.user.id){t.track.vote=s.user.w;break}for(var n in t.track.n)if(t.track.n[n].vid===s.user.id){t.track.vote=-s.user.w;break}}function r(t){t.chid=s.channel.id,n.emit("vote",t)}t.load.signed=!1,t.playlist=[],t.track={},t.channel="Channel",o.bindTo(t).add({combo:"alt+up",description:"Up current track",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){r({id:t.track.id,v:s.user.w}),event.preventDefault(),console.log("alt+up")}}).add({combo:"alt+down",description:"Down current track",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){r({id:t.track.id,v:-1*s.user.w}),event.preventDefault(),console.log("alt+down")}}),t.reverse=0;var c=window.innerWidth>0?window.innerWidth:screen.width;960>=c&&(t.reverse=1),t.toggleLeft=function(){a("left").toggle()},t.toggleRight=function(){a("right").toggle()},t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.track=s.channel.current,e.title="+D"+s.channel.current.a+" - "+s.channel.current.t+" @ Trigger")},!0),n.on("newcurrent",function(a){if(t.load.signed===!0){for(var n in a.track.p)if(a.track.p[n].vid===s.user.id){a.track.vote=s.user.w;break}for(var n in a.track.n)if(a.track.n[n].vid===s.user.id){a.track.vote=-s.user.w;break}}s.channel.current=a.track,t.stopTimer(),t.starTimer(0,a.track.tt),t.track=a.track,e.title="! "+a.track.a+" - "+a.track.t+" @ Trigger";for(var i=t.playlist.length,o=0;i>o;o++)if(t.playlist[o].id===a.tid||t.playlist[o].id===a.track.id){t.playlist.splice(o,1);break}}),t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&l(),t.load.signed=e.load.signed},!0),t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.track=s.channel.current)},!0),n.on("uptr",function(e){if(e.t.id===s.channel.current.id){if(t.load.signed===!0){for(var a in e.t.p)if(e.t.p[a].vid===s.user.id){e.t.vote=s.user.w;break}for(var a in e.t.n)if(e.t.n[a].vid===s.user.id){e.t.vote=-1*s.user.w;break}}t.track=e.t}else{for(var n,i=t.playlist.length,o=0;i>o;o++)if(t.playlist[o].id===e.t.id){n=o,t.playlist[o]=e.t;break}if(t.load.signed===!0){for(var a in e.t.p)if(e.t.p[a].vid===s.user.id){e.t.vote=s.user.w;break}for(var a in e.t.n)if(e.t.n[a].vid===s.user.id){e.t.vote=-1*s.user.w;break}}}}),n.on("addtrack",function(e){e.track.src="img/nocover.png";var a=e.track;a.vote=0;for(var n=t.playlist.length,i=!1,o=0;n>o;o++)if(t.playlist[o].id===e.id){i=!0;break}if(i===!1){if(t.load.signed===!0){for(var l in e.p)if(e.p[l].vid===s.user.id){e.vote=s.user.w;break}for(var l in e.n)if(e.n[l].vid===s.user.id){e.vote=-1*s.user.w;break}}t.playlist.push(a)}}),n.on("removetrack",function(e){for(var a=t.playlist.length,s=0;a>s;s++)if(t.playlist[s].id===e.tid){t.playlist.splice(s,1);break}}),t.voteUp=function(t){var e=window.innerWidth>0?window.innerWidth:screen.width,a=!1;960>=e&&(a=!0),r(a===!0?this.track.vote===-s.user.w?{id:t,v:0}:{id:t,v:-s.user.w}:this.track.vote===s.user.w?{id:t,v:0}:{id:t,v:s.user.w})},t.voteDown=function(t){var e=window.innerWidth>0?window.innerWidth:screen.width,a=!1;960>=e&&(a=!0),r(a===!0?this.track.vote===s.user.w?{id:t,v:0}:{id:t,v:s.user.w}:this.track.vote===-s.user.w?{id:t,v:0}:{id:t,v:-s.user.w})},n.on("channeldata",function(e){t.channel=e.name,t.playlist=e.pls,t.items=t.playlist,s.channel.ct=e.ct,t.starTimer(s.channel.ct,e.current.tt),t.current=e.current;for(var a=e.pls.length,n=0;a>n;n++)t.playlist[n].vote=0});var d,u=0;t.progress=0,t.starTimer=function(e,a){u=e,d=i(function(){t.progress=(u/a*100).toFixed(2),u++},1e3)},t.stopTimer=function(){angular.isDefined(d)&&(i.cancel(d),d=void 0,t.progress=0)}}]),angular.module("trigger").controller("OnlineCtrl",["$scope","$rootScope","socket","Client",function(t,e,a,s){t.users=[],a.on("offuser",function(e){t.usersCount=t.usersCount-1;for(var a in t.users)t.users[a].id===e.uid&&t.users.splice(a,1)}),a.on("newuser",function(e){t.usersCount=t.usersCount+1;var a={id:e.uid,n:e.n,a:e.a};t.users.push(a)}),a.on("usupd",function(e){for(var a in t.users)t.users[a].id===e.uid&&(t.users[a].a=e.a)}),t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.users=s.channel.users,t.usersCount=t.users.length),t.load.welcome=e.load.welcome},!0)}]),angular.module("trigger").controller("NavbarCtrl",["$scope",function(t){t.date=new Date}]),angular.module("trigger").controller("MinusesCtrl",["$scope","$rootScope","Client",function(t,e,a){t.tracks=[],t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&a.getUser({id:e.userId,uplshift:0,p:!1},function(e){t.tracks=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("LoginCtrl",["$scope","$rootScope","$mdDialog","md5","Client",function(t,e,a,s,n){function i(i){i.error?console.log(i.error):(localStorage.setItem("username",t.user.name),localStorage.setItem("password",s.createHash(t.user.password)),n.user=i.user,e.userId=i.user.id,e.load.signed=!0,a.hide(),t.$digest())}t.user={name:"",password:""},t.login=function(){""===t.user.name?n.login("DonSinDRom",s.createHash("3a12a6"),i):n.login(t.user.name,s.createHash(t.user.password),i)},t.hide=function(){a.hide()}}]),angular.module("trigger").controller("HistoryCtrl",["$scope","Client","socket",function(t,e,a){function s(e){t.tracks.push(e)}function n(e){t.tracks=[],a.emit("gethistory",{chid:1,s:e.shift,a:e.artist,t:e.title,top:e.top,g:e.gold,v:e.topType},function(t){console.log("gethistory",t);for(var e in t)s(t[e])})}t.tracks=[],t.data={shift:0,artist:"",title:"",gold:!1,top:!1,topType:!1},t.showHistory=function(){n(t.data)}}]),angular.module("trigger").controller("DemocracyCtrl",["$scope",function(t){t.data={selectedIndex:1},t.president={name:"Suok",description:"упоротый напрочь"},t.moderators=[{name:"bird",id:"1",description:"упарывается"},{name:"Ucsus",id:"1912",description:"Rudolph"},{name:"Fab",id:"234",description:"Dasher"},{name:"Ololo",id:"1234",description:"редактор"},{name:"Lulz",id:"624",description:"упрт"},{name:"Suok",id:"2453",description:"начальник"}],t.banned=[{name:"bird",id:"1",reason:"упарывается"},{name:"Ucsus",id:"1912",reason:"Rudolph"},{name:"Fab",id:"234",reason:"Dasher"},{name:"Ololo",id:"1234",reason:"редактор"},{name:"Lulz",id:"624",reason:"упрт"},{name:"Suok",id:"2453",reason:"начальник"}],t.next=function(){t.data.selectedIndex=Math.min(t.data.selectedIndex+1,2)},t.previous=function(){t.data.selectedIndex=Math.max(t.data.selectedIndex-1,0)}}]),angular.module("trigger").controller("ConsoleCtrl",["$scope","$rootScope","$interval","$timeout","$mdDialog","$mdBottomSheet","Client","socket","hotkeys","$translate",function(t,e,a,s,n,i,o,l,r,c){function d(t,e){t.hide=function(){e.hide()}}var u=c.preferredLanguage(),m={ru:["А ты тоже ждешь 80 порт как и я, username?","Тыц-тыц, username, унц-унц, username!","Когда–то инвайт давали за +11, username.","Не бери треки у наркоманов, username!","Не всё то чилл, что уныло, username!","Не весь метал одинаково полезен, username!","Это не баян, это ротация, username"],en:["Let's dance, username?","Let's do lunch sometime, username","I've been there., username","Do you hear me, username?"]};t.users={listeners:0,active:0},t.user={name:"%username%",uplim:0};var g=document.getElementById("audio");t.volume=50,localStorage.getItem("volume")>-1?t.volume=localStorage.getItem("volume"):localStorage.setItem("volume",t.volume),t.changeVolume=function(t){localStorage.setItem("volume",t),g.volume=t/100},r.bindTo(t).add({combo:"shift+left",description:"Volume -1",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){t.volume<=1?(t.changeVolume(0),t.volume=0):(t.changeVolume(t.volume-1),t.volume-=1),event.preventDefault()}}).add({combo:"shift+right",description:"Volume +1",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){t.volume>=99?(t.changeVolume(100),t.volume=100):(t.changeVolume(t.volume+1),t.volume+=1),event.preventDefault()}}).add({combo:"alt+left",description:"Volume -5",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){t.volume<=5?(t.changeVolume(0),t.volume=0):(t.changeVolume(t.volume-5),t.volume-=5),event.preventDefault()}}).add({combo:"alt+right",description:"Volume +5",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){t.volume>=95?(t.changeVolume(100),t.volume=100):(t.changeVolume(t.volume+5),t.volume+=5),event.preventDefault()}}),t.greeting=m[u][Math.floor(Math.random()*m[u].length)].replace("username",t.user.name),a(function(){t.greeting=m[u][Math.floor(Math.random()*m[u].length)].replace("username",t.user.name)},9e3),t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.users.listeners=o.channel.lst,t.users.active=o.channel.a,l.on("lst",function(e){t.users.listeners=e.l,t.users.active=e.a})),t.load.welcome=e.load.welcome},!0),t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&(t.user.name=o.user.n,t.user.uplim=o.user.t,l.on("uplim",function(e){t.user.uplim=e.t})),t.load.signed=e.load.signed},!0),t.data=function(){console.log("data",o)},t.showLoginModal=function(t){n.show({controller:d,templateUrl:"components/login/login.html",targetEvent:t})},d.$inject=["$scope","$mdDialog"],t.openUploadBar=function(e){t.alert="",i.show({templateUrl:"components/upload/upload.html",controller:"UploadCtrl",targetEvent:e}).then(function(e){t.alert=e.name+" clicked!"})}}]),angular.module("trigger").controller("ChatCtrl",["$scope","$rootScope","Client","socket","hotkeys",function(t,e,a,s,n){function i(){if(t.data.tink===!0){var e=new Audio;e.canPlayType("audio/ogg")?(e.src="http://trigger.fm/sounds/tink.ogg",e.play()):(e.src="http://trigger.fm/sounds/tink.mp3",e.play())}}function o(){s.emit("getchat",{shift:0,id:1},function(e){for(var a=!1,s=e.m,n=r(),o=l(s,n),d=o.length,u=m.length,g=0;d>g;g++){for(var p=0;u>p;p++)if(o[g].m.replace(m[p][0],"")!=o[g].m){if(2>p){o[g].m=t.data.img!==!0?o[g].m.replace(m[p+2][0],m[p+2][1]):o[g].m.replace(m[p][0],m[p][1]);break}o[g].m=o[g].m.replace(m[p][0],m[p][1])}var h=c(o[g]);h&&(o[g].type=h,a=!0)}a&&i(),t.messages=o})}function l(t,e){var a=t.concat(e);return a=a.sort(function(t,e){return new Date(t.t)-new Date(e.t)})}function r(){for(var t=sessionStorage.length,e=[],a=0;t>a;a++){var s=sessionStorage.key(a),n=sessionStorage.getItem(s);s.indexOf("private")>-1&&e.push(JSON.parse(n))}return e}function c(t){return t.m.indexOf("&gt;&gt;"+a.user.n)>-1?"private":t.m.indexOf("&gt;"+a.user.n)>-1?"personal":void 0}function d(){document.querySelector("#chatInput").focus()}function u(e){if(s.emit("sendmessage",{m:e}),e){for(var a=t.message.split(" "),n=[],i=0;i<a.length;i++)a[i].indexOf(">")>-1&&n.push(a[i]);t.message=n.join(" ")+" "}}n.bindTo(t).add({combo:"shift+f",description:"Focus to chat input",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){d(),event.preventDefault()}}),t.message="",t.messages=[],t.data={tink:!0,img:!0};var m=[];m[0]=[],m[0][0]=/(http:\/\/[\w\-\.]+\.[a-zA-Z]{2,3}(?:\/\S*)?(?:[\w])+\.(?:jpg|png|gif|jpeg|bmp))/gim,m[0][1]='&nbsp;<a href="$1" target="_blank"><img src="$1" /></a>&nbsp;',m[1]=[],m[1][0]=/(https:\/\/[\w\-\.]+\.[a-zA-Z]{2,3}(?:\/\S*)?(?:[\w])+\.(?:jpg|png|gif|jpeg|bmp))/gim,m[1][1]='&nbsp;<a href="$1" target="_blank"><img src="$1" /></a>&nbsp;',m[2]=[],m[2][0]=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,m[2][1]='&nbsp;<a href="$1" target="_blank">$1</a>&nbsp;',m[3]=[],m[3][0]=/(^|[^\/])(www\.[\S]+(\b|$))/gim,m[3][1]='&nbsp;<a href="http://$1" target="_blank">$1</a>&nbsp;',m[4]=[],m[4][0]=/([\w\-\d]+\@[\w\-\d]+\.[\w\-\d]+)/gim,m[4][1]='&nbsp;<a href="mailto:$1">$1</a>&nbsp;',m[5]=[],m[5][0]="!!!!!!!!!!",m[5][1]="я идиот убейте меня кто нибудь! !!!!",m[6]=[],m[6][0]="))))))))))",m[6][1]='<font color="pink">недавно я познакомился с мальчиком, у него такие голубые глаза и член который еле помещается в мою... кажется я не туда пишу</font> ',m[7]=[],m[7][0]="NO.",m[7][1]='&lt;img src="/assets/images/nocover.png" style="object-fit: contain;"/&gt;',"false"===localStorage.getItem("tink")&&(t.data.tink=!1),"false"===localStorage.getItem("img")&&(t.data.img=!1),t.setTink=function(){t.data.tink===!0?localStorage.setItem("tink",!0):localStorage.setItem("tink",!1)},t.setImg=function(){t.data.img===!0?localStorage.setItem("img",!0):localStorage.setItem("img",!1)},t.$watch(function(){return e.load.signed},function(){e.load.signed===!0?(o(),s.on("message",function(e){var a=c(e);a?(e.type=a,i(),"private"===e.type&&sessionStorage.setItem("private"+e.t,JSON.stringify(e))):e.m.indexOf("&gt;&gt;")>-1&&sessionStorage.setItem("private"+e.t,JSON.stringify(e));for(var s=m.length,n=0;s>n;n++)if(e.m.replace(m[n][0],"")!=e.m){if(2>n){e.m=t.data.img!==!0?e.m.replace(m[n+2][0],m[n+2][1]):e.m.replace(m[n][0],m[n][1]);break}e.m=e.m.replace(m[n][0],m[n][1])}t.messages.push(e)})):(t.message="",t.messages=""),t.load.signed=e.load.signed},!0),t.sendMessage=function(){this.message&&u(t.message)},t.addNick=function(e){var a=t.message;a=a.indexOf(">"+e)>-1?a.indexOf(">>"+e)>-1?t.message.replace(">>"+e+" ",">"+e+" "):t.message.replace(">"+e+" ",">>"+e+" "):">"+e+" "+t.message,t.message=a,d()}}]),angular.module("trigger").controller("AppCtrl",["$scope","$rootScope","$timeout","$mdSidenav","hotkeys","Client",function(t,e,a,s,n,i){var o=document.getElementById("audioBtn"),l=document.getElementById("audio");t.play=!1,t.start=function(){t.play=!0,o.classList.add("play"),l.play()},"true"===localStorage.getItem("play")&&a(t.start(),5e3),t.togglePlay=function(){o.classList.toggle("play"),t.play=!t.play,t.play===!0?(localStorage.setItem("play",!0),l.play()):(localStorage.setItem("play",!1),l.pause())},n.bindTo(t).add({combo:"ctrl+space",description:"Mute current track",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){t.togglePlay(),event.preventDefault()}}).add({combo:"shift+space",description:"Mute current track",allowIn:["INPUT","SELECT","TEXTAREA"],callback:function(){t.togglePlay(),event.preventDefault()}}),t.trackToChat=function(t){var e=document.querySelector("#chatInput");e&&(e.value+="/track"+t+" ",e.focus())},t.infoTab=2,t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&(t.infoTab=0),t.load.signed=e.load.signed},!0),t.$watchCollection("infoTab",function(a,s){3===s&&3!=a&&(e.userId=i.user.id,t.isMe=!0,t.profileTab=0)}),t.isMe=!0,t.openProfile=function(a){e.userId=a,t.isMe=a===i.user.id?!0:!1,t.infoTab=3,t.profileTab=0},t.setInfoTab=function(e){t.infoTab=e},t.profileTab=0,t.setProfileTab=function(e){t.profileTab=e},t.next=function(){t.profileTab=Math.min(t.profileTab+1,2)},t.previous=function(){t.profileTab=Math.max(t.profileTab-1,0)},t.logout=function(){i.logout(function(){""!=localStorage.getItem("password")&&(localStorage.removeItem("password"),localStorage.removeItem("username"))}),e.load.signed=!1,t.infoTab=2},t.toggleLeft=function(){s("left").toggle()},t.toggleRight=function(){s("right").toggle()}}]).controller("LeftCtrl",["$scope","$timeout","$mdSidenav",function(t,e,a){t.close=function(){a("left").close()}}]).controller("RightCtrl",["$scope","$timeout","$mdSidenav",function(t,e,a){t.close=function(){a("right").close()}}]);var app=angular.module("trigger");app.filter("reverse",function(){return function(t){return t.slice().reverse()}}),app.filter("readableTime",function(){return function(t){var e,a,s,t=parseInt(t,10);switch(!1){case!(60>t):s=t;break;case!(3600>t):a=~~(t/60),s=t%60;break;default:e=~~(t/3600),a=~~(t%3600/60),s=t%60}var n="";return e>0&&(n+=""+e+":"+(10>a?"0":"")),n+=a>0?""+a+":"+(10>s?"0":""):"0:",n+=""+s}});var app=angular.module("trigger");app.factory("md5",function(){var t={createHash:function(t){var e,a,s,n,i,o,l,r,c,d,u=function(t,e){return t<<e|t>>>32-e},m=function(t,e){var a,s,n,i,o;return n=2147483648&t,i=2147483648&e,a=1073741824&t,s=1073741824&e,o=(1073741823&t)+(1073741823&e),a&s?2147483648^o^n^i:a|s?1073741824&o?3221225472^o^n^i:1073741824^o^n^i:o^n^i},g=function(t,e,a){return t&e|~t&a},p=function(t,e,a){return t&a|e&~a},h=function(t,e,a){return t^e^a},v=function(t,e,a){return e^(t|~a)},_=function(t,e,a,s,n,i,o){return t=m(t,m(m(g(e,a,s),n),o)),m(u(t,i),e)},k=function(t,e,a,s,n,i,o){return t=m(t,m(m(p(e,a,s),n),o)),m(u(t,i),e)},f=function(t,e,a,s,n,i,o){return t=m(t,m(m(h(e,a,s),n),o)),m(u(t,i),e)},b=function(t,e,a,s,n,i,o){return t=m(t,m(m(v(e,a,s),n),o)),m(u(t,i),e)},w=function(t){for(var e,a=t.length,s=a+8,n=(s-s%64)/64,i=16*(n+1),o=new Array(i-1),l=0,r=0;a>r;)e=(r-r%4)/4,l=r%4*8,o[e]=o[e]|t.charCodeAt(r)<<l,r+=1;return e=(r-r%4)/4,l=r%4*8,o[e]=o[e]|128<<l,o[i-2]=a<<3,o[i-1]=a>>>29,o},y=function(t){var e,a,s="",n="";for(a=0;3>=a;a+=1)e=t>>>8*a&255,n="0"+e.toString(16),s+=n.substr(n.length-2,2);return s},T=[],C=7,I=12,x=17,$=22,P=5,S=9,U=14,M=20,D=4,L=11,B=16,E=23,A=6,z=10,N=15,F=21;for(T=w(t),l=1732584193,r=4023233417,c=2562383102,d=271733878,e=T.length,a=0;e>a;a+=16)s=l,n=r,i=c,o=d,l=_(l,r,c,d,T[a+0],C,3614090360),d=_(d,l,r,c,T[a+1],I,3905402710),c=_(c,d,l,r,T[a+2],x,606105819),r=_(r,c,d,l,T[a+3],$,3250441966),l=_(l,r,c,d,T[a+4],C,4118548399),d=_(d,l,r,c,T[a+5],I,1200080426),c=_(c,d,l,r,T[a+6],x,2821735955),r=_(r,c,d,l,T[a+7],$,4249261313),l=_(l,r,c,d,T[a+8],C,1770035416),d=_(d,l,r,c,T[a+9],I,2336552879),c=_(c,d,l,r,T[a+10],x,4294925233),r=_(r,c,d,l,T[a+11],$,2304563134),l=_(l,r,c,d,T[a+12],C,1804603682),d=_(d,l,r,c,T[a+13],I,4254626195),c=_(c,d,l,r,T[a+14],x,2792965006),r=_(r,c,d,l,T[a+15],$,1236535329),l=k(l,r,c,d,T[a+1],P,4129170786),d=k(d,l,r,c,T[a+6],S,3225465664),c=k(c,d,l,r,T[a+11],U,643717713),r=k(r,c,d,l,T[a+0],M,3921069994),l=k(l,r,c,d,T[a+5],P,3593408605),d=k(d,l,r,c,T[a+10],S,38016083),c=k(c,d,l,r,T[a+15],U,3634488961),r=k(r,c,d,l,T[a+4],M,3889429448),l=k(l,r,c,d,T[a+9],P,568446438),d=k(d,l,r,c,T[a+14],S,3275163606),c=k(c,d,l,r,T[a+3],U,4107603335),r=k(r,c,d,l,T[a+8],M,1163531501),l=k(l,r,c,d,T[a+13],P,2850285829),d=k(d,l,r,c,T[a+2],S,4243563512),c=k(c,d,l,r,T[a+7],U,1735328473),r=k(r,c,d,l,T[a+12],M,2368359562),l=f(l,r,c,d,T[a+5],D,4294588738),d=f(d,l,r,c,T[a+8],L,2272392833),c=f(c,d,l,r,T[a+11],B,1839030562),r=f(r,c,d,l,T[a+14],E,4259657740),l=f(l,r,c,d,T[a+1],D,2763975236),d=f(d,l,r,c,T[a+4],L,1272893353),c=f(c,d,l,r,T[a+7],B,4139469664),r=f(r,c,d,l,T[a+10],E,3200236656),l=f(l,r,c,d,T[a+13],D,681279174),d=f(d,l,r,c,T[a+0],L,3936430074),c=f(c,d,l,r,T[a+3],B,3572445317),r=f(r,c,d,l,T[a+6],E,76029189),l=f(l,r,c,d,T[a+9],D,3654602809),d=f(d,l,r,c,T[a+12],L,3873151461),c=f(c,d,l,r,T[a+15],B,530742520),r=f(r,c,d,l,T[a+2],E,3299628645),l=b(l,r,c,d,T[a+0],A,4096336452),d=b(d,l,r,c,T[a+7],z,1126891415),c=b(c,d,l,r,T[a+14],N,2878612391),r=b(r,c,d,l,T[a+5],F,4237533241),l=b(l,r,c,d,T[a+12],A,1700485571),d=b(d,l,r,c,T[a+3],z,2399980690),c=b(c,d,l,r,T[a+10],N,4293915773),r=b(r,c,d,l,T[a+1],F,2240044497),l=b(l,r,c,d,T[a+8],A,1873313359),d=b(d,l,r,c,T[a+15],z,4264355552),c=b(c,d,l,r,T[a+6],N,2734768916),r=b(r,c,d,l,T[a+13],F,1309151649),l=b(l,r,c,d,T[a+4],A,4149444226),d=b(d,l,r,c,T[a+11],z,3174756917),c=b(c,d,l,r,T[a+2],N,718787259),r=b(r,c,d,l,T[a+9],F,3951481745),l=m(l,s),r=m(r,n),c=m(c,i),d=m(d,o);var R=y(l)+y(r)+y(c)+y(d);return R.toLowerCase()}};return t}),angular.module("trigger").run(["$templateCache",function(t){t.put("components/app/app.html",'<div ng-controller="AppCtrl" layout="column" layout-fill="" class="viewport--H"><section class="viewport--H"><md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia(\'min-width: 600px\')"><md-toolbar class="console__switcher-cont"><audio id="audio"><source src="http://trigger.fm/stream/mainmp3" type="audio/mpeg"><source src="http://trigger.fm/stream/main" type="audio/ogg"></audio><svg id="audioBtn" class="switcher" ng-click="togglePlay()" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 850.4 595.3" enable-background="new 0 0 850.4 595.3" xml:space="preserve"><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="55.3274" stroke-miterlimit="10" d="M154.7,568.2c-149-149-149-392.1,0-541.1"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="55.3274" stroke-miterlimit="10" d="M239,483.9C135.1,380,135.1,213.3,239,109.4"></path><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="55.3274" stroke-miterlimit="10" d="M323.3,399.6c-56.9-56.9-56.9-149,0-205.8"></path><circle class="c" fill="#7F7F7F" cx="425.2" cy="297.6" r="58.8"></circle><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="55.3274" stroke-miterlimit="10" d="M527.1,195.7c56.9,56.9,56.9,149,0,205.8"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="55.3274" stroke-miterlimit="10" d="M611.4,111.4c103.9,103.9,103.9,270.5,0,374.4"></path><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="55.3274" stroke-miterlimit="10" d="M695.7,27.1c149,149,149,392.1,0,541.1"></path></svg></md-toolbar><md-content class="console__ctrl" ng-controller="LeftCtrl"><div class="console" ng-include="\'components/console/console.html\'"></div></md-content></md-sidenav><div class="playlist" ng-include="\'components/playlist/playlist.html\'"></div><md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="right" md-is-locked-open="$mdMedia(\'min-width: 960px\')"><md-content ng-controller="RightCtrl" class="h"><div class="h info" ng-include="\'components/info/info.html\'"></div></md-content></md-sidenav></section></div>'),t.put("components/chat/chat.html",'<div ng-controller="ChatCtrl" class="chat__module"><md-content class="chat__md-content" scroll-glue=""><md-list class="chat__list"><md-item ng-repeat="msg in messages" class="chat__list-item"><md-item-content class="chat__item"><div class="md-tile-content" ng-class="{ \'private\': msg.pm, \'personal\': msg.type }"><span class="msg__author" ng-click="addNick(msg.uname)">{{msg.uname}}:</span> <span class="msg__message" ng-bind-html="msg.m"></span> <span class="msg__time" am-time-ago="msg.t"></span></div></md-item-content></md-item></md-list></md-content><div class="online__include" ng-include="\'components/online/online.html\'"></div><div class="chat__input-grp"><md-input-container flex=""><label>{{ \'startTyping\' | translate }}</label> <textarea id="chatInput" class="chat__input" ng-enter="sendMessage()" ng-model="message" columns="1" md-maxlength="240" autofocus=""></textarea><div class="chat__input-nav"><md-button class="chat__button--bold" aria-label="chat-bold">{{ \'chatBold\' | translate }}</md-button><md-button class="chat__button--irony" aria-label="chat-irony">{{ \'chatIrony\' | translate }}</md-button><md-checkbox ng-model="data.tink" ng-change="setTink()" class="chat__checkbox--tink">{{ \'chatTink\' | translate }}</md-checkbox><md-checkbox ng-model="data.img" ng-change="setImg()" class="chat__checkbox--img">{{ \'chatImg\' | translate }}</md-checkbox></div></md-input-container></div></div>'),t.put("components/console/console.html",'<md-toolbar class="console__include" layout="column" layout-align="center center" ng-controller="ConsoleCtrl"><md-slider ng-model="volume" aria-label="volume-slider" ng-change="changeVolume(volume)" min="0" max="100" step="1"></md-slider><img ng-src="assets/images/logo.png" class="console__logo" ng-click="data()"><md-button class="console__login-btn" aria-label="console-login" ng-show="!load.signed" ng-click="showLoginModal($event)">{{ \'consoleLogIn\' | translate }}</md-button><p class="console__stat">{{ \'consoleListeners\' | translate }}:&nbsp;<span class="console__listeners">{{users.listeners}}</span> {{ \'consoleActiveUsers\' | translate }}:&nbsp;<span class="console__active-users">{{users.active}}</span></p><md-button class="console__buttton--upload" aria-label="uploader-btn" ng-click="openUploadBar($event)"><ng-md-icon icon="file_upload" size="24"></ng-md-icon></md-button><p class="console__user-limit" ng-show="load.signed">{{ \'consoleYouCanUpload\' | translate }}&nbsp;<time class="console__limit">{{user.uplim | readableTime}}</time></p><p class="console__greating" ng-bind="greeting"></p><p class="console__links"><a href="#" class="console__link">{{ \'consoleDonateMe\' | translate }}</a> <a href="#" class="console__link">{{ \'consoleChangeTheme\' | translate }}</a> <a href="#" class="console__link">{{ \'consoleRTFM\' | translate }}</a></p><md-button class="console__login-btn" aria-label="console-logout" ng-show="load.signed" ng-click="logout()">{{ \'consoleLogOut\' | translate }}</md-button></md-toolbar>'),t.put("components/democracy/democracy.html",'<div ng-controller="DemocracyCtrl" class="democracy__ctrl"><ng-switch on="data.selectedIndex" class="democracy__tabpanel-container"><div role="tabpanel" id="tabModerList-content" aria-labelledby="tabModerList" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><md-card class="democracy__elections"><h4 class="t-a-semicolon democracy__header">{{ \'democracyElections\' | translate }}</h4><md-input-container class="democracy__elections-input"><label>{{ \'democracyCandidate\' | translate }}</label> <input type="text" ng-model="user.lastName"></md-input-container><div class="democracy__elections-row"><span class="democracy__elections-choice"><span class="t-a-semicolon">{{ \'democracyVoted\' | translate }}</span> <span class="t-b-space democracy__elections-username">Suok</span></span><md-button aria-label="vote" class="md-raised democracy__elections-btn">{{ \'democracyVote\' | translate }}</md-button></div></md-card></div><div role="tabpanel" id="tabModerText-content" aria-labelledby="tabModerText" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><md-card class="democracy__list"><p>История кое-как работает. Если кликнуть на ник в чате - то ему можно отправить личное сообщение. Клики на юзеров в блоке "онлайн" тоже работают.<br>Можно слушать музыку! Клик на ту штуку в левом верхнем углу!<br>И да, можно уже попробовать открыть клиент на мобильнике! Ура.<br></p></md-card></div></ng-switch><md-tabs class="md-accent" md-selected="data.selectedIndex"><md-tab id="ModerList" aria-controls="tabModerList-content"><span class="tabs__full">{{ \'democracyTabModer\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="account_balance" size="24"></ng-md-icon></span></md-tab><md-tab id="tabModerText" aria-controls="tabModerText-content"><span class="tabs__full">{{ \'democracyTabBlog\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="question_answer" size="24"></ng-md-icon></span></md-tab></md-tabs></div>'),t.put("components/history/history.html",'<div ng-controller="HistoryCtrl" class="history__module"><div class="history__search-grp"><div class="history__search-row history__search-row--filters"><md-checkbox ng-model="data.gold" ng-change="showHistory()" class="history__checkbox">{{ \'historyGold\' | translate }}</md-checkbox><md-checkbox ng-model="data.top" ng-change="showHistory()" class="history__checkbox">Top</md-checkbox><md-select ng-model="data.topType" ng-change="showHistory()" class="history__select"><md-option value="true">Votes</md-option><md-option value="false" ng-selected="selected">Rating</md-option></md-select><md-button class="md-fab history--search-btn" ng-click="showHistory()" aria-label="Search-button"><ng-md-icon icon="search" size="24"></ng-md-icon></md-button></div><div class="history__search-row history__search-row--input"><md-input-container class="history--input"><label>{{ \'historyArtist\' | translate }}</label> <input type="text" ng-model="data.artist"></md-input-container><md-input-container class="history--input"><label>{{ \'historyTitle\' | translate }}</label> <input type="text" ng-model="data.title" ng-enter="showHistory()"></md-input-container></div></div><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track" ng-class="{\'track--gold\': gold == true}"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt=""></div><div class="track__row"><div class="track__base"><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div><div class="track__additional"><div class="track__content"><div class="track__links"><a href="#" class="track__link">>vk</a> <a href="#" class="track__link">>muzebra</a> <a href="#" class="track__link" ng-click="trackToChat(track.id)">>{{ \'trackToChat\' | translate }}</a></div><div class="track__upload-info">{{ \'trackUploadedBy\' | translate }}&nbsp; <a ng-click="openProfile(track.sid)">{{ track.s }}</a>&nbsp; <span am-time-ago="track.ut"></span></div></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div></div></md-item></md-list><div class="histroy--emtpy" ng-show="tracks.length < 1"><p class="history--empty-text"><ng-md-icon icon="adb" size="24"></ng-md-icon>{{ \'historyNoResults\' | translate }}</p></div></md-content></div>'),t.put("components/info/info.html",'<div class="tabsdemoStaticTabs h" layout="column"><md-tabs md-selected="infoTab" flex="" class="h"><md-tab id="tabChat" md-on-select="setInfoTab(0)" class="h" aria-controls="tabChat-content" ng-show="load.signed"><md-tab-label><span class="tabs__full">{{ \'infoTabChat\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="chat" size="24"></ng-md-icon></span></md-tab-label><div class="chat" ng-include="\'components/chat/chat.html\'" ng-show="load.signed"></div></md-tab><md-tab id="tabHistory" md-on-select="setInfoTab(1)" class="h" aria-controls="tabHistory-content"><md-tab-label><span class="tabs__full">{{ \'infoTabHistory\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="history" size="24"></ng-md-icon></span></md-tab-label><div class="history" ng-include="\'components/history/history.html\'"></div></md-tab><md-tab id="tabDemocracy" md-on-select="setInfoTab(2)" class="h" aria-controls="tabDemocracy-content"><md-tab-label><span class="tabs__full">{{ \'infoTabDemocracy\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="whatshot" size="24"></ng-md-icon></span></md-tab-label><div class="democracy__include" ng-include="\'components/democracy/democracy.html\'"></div></md-tab><md-tab id="tabProfile" md-on-select="setInfoTab(3)" class="h" aria-controls="tabProfile-content" ng-show="load.signed"><md-tab-label><span class="tabs__full">{{ \'infoTabProfile\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="person" size="24"></ng-md-icon></span></md-tab-label><div class="profile__include" ng-include="\'components/profile/profile.html\'"></div></md-tab></md-tabs></div>'),t.put("components/login/login.html",'<md-dialog aria-label="login-modal" class="login__ctrl" ng-controller="LoginCtrl"><md-card class="login__card"><md-input-container class="login__username"><label>{{ \'loginUsername\' | translate }}</label> <input inputmode="latin" ng-model="user.name" type="text"></md-input-container><md-input-container class="login__username"><label>{{ \'loginPassword\' | translate }}</label> <input inputmode="latin" ng-model="user.password" ng-enter="login()" type="password"></md-input-container><md-button aria-label="login--btn" class="login__btn" ng-click="login()">{{ \'loginSubmit\' | translate }}</md-button></md-card></md-dialog>'),t.put("components/minuses/minuses.html",'<div class="minuses__ctrl" ng-controller="MinusesCtrl"><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt=""></div><div class="track__row"><div class="track__base"><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div><div class="track__additional"><div class="track__content"><div class="track__links"><a href="#" class="track__link">>vk</a> <a href="#" class="track__link">>muzebra</a> <a href="#" class="track__link" ng-click="trackToChat(track.id)">>{{ \'trackToChat\' | translate }}</a></div><div class="track__upload-info">{{ \'trackUploadedBy\' | translate }}&nbsp; <a ng-click="openProfile(track.sid)">{{ track.s }}</a>&nbsp; <span am-time-ago="track.ut"></span></div></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div></div></md-item></md-list></md-content></div>'),t.put("components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center" ng-controller="NavbarCtrl"><md-button aria-label="lulz" href="https://github.com/Swiip/generator-gulp-angular">Gulp Angular</md-button><section flex="" layout="row" layout-align="left center"><md-button href="#" class="md-raised">Home</md-button><md-button href="#" class="md-raised">About</md-button><md-button href="#" class="md-raised">Contact</md-button></section><md-button aria-label="example" href="#">Current date: {{ date | date:\'yyyy-MM-dd\' }}</md-button></md-toolbar>'),t.put("components/online/online.html",'<div class="online__ctrl" ng-controller="OnlineCtrl"><p class="online__here">{{ \'onlineHere\' | translate }}:&nbsp;<span class="online__counter">{{usersCount}}</span></p><md-content class="online__md-content"><md-list class="online__list"><md-item ng-repeat="user in users" class="online__list-item"><md-item-content class="online__item" ng-class="{active: user.a==true}"><md-button ng-click="openProfile(user.id)" aria-label="open-user-profile" class="user__2profile">i</md-button><md-button ng-click="addNick(user.n)" aria-label="add-user-to-chat" class="user__2chat">{{user.n}}</md-button></md-item-content></md-item></md-list></md-content></div>'),t.put("components/playlist/playlist.html",'<div class="playlist__ctrl" layout="column" ng-controller="PlaylistCtrl"><md-toolbar class="playlist__toolbar"><h2 class="md-toolbar-tools playlist__toolbar-tools"><md-button class="playlist__leftbar-swither" aria-label="leftbar-switcher" ng-click="toggleLeft()"><svg class="playlist__leftbar-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 56 56" enable-background="new 0 0 56 56" xml:space="preserve"><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="3" stroke-miterlimit="10" d="M14.2,41.8c-7.6-7.6-7.6-20,0-27.6"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="3" stroke-miterlimit="10" d="M18.5,37.5c-5.3-5.3-5.3-13.8,0-19.1"></path><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="3" stroke-miterlimit="10" d="M22.8,33.2c-2.9-2.9-2.9-7.6,0-10.5"></path><circle class="c" fill="#7F7F7F" cx="28" cy="28" r="3"></circle><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="3" stroke-miterlimit="10" d="M33.2,22.8c2.9,2.9,2.9,7.6,0,10.5"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="3" stroke-miterlimit="10" d="M37.5,18.5c5.3,5.3,5.3,13.8,0,19.1"></path><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="3" stroke-miterlimit="10" d="M41.8,14.2c7.6,7.6,7.6,20,0,27.6"></path></svg></md-button>{{channel}}<md-button class="playlist__rightbar-swither" aria-label="rightbar-switcher" ng-click="toggleRight()"><ng-md-icon icon="view_carousel" size="24"></ng-md-icon></md-button></h2></md-toolbar><md-content class="playlist__content--current"><md-list layout="column" class="playlist__list"><md-item class="playlist__track"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt=""></div><div class="track__row"><div class="track__base"><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div><div class="track__additional"><div class="track__content"><div class="track__links"><a href="http://vk.com/audio?q={{track.t}}-{{track.a}}" target="_blank" class="track__link">>vk</a> <a href="http://muzebra.com/search/?q={{track.t}}-{{track.a}}" target="_blank" class="track__link">>muzebra</a> <a href="#" class="track__link" ng-click="trackToChat(track.id)">{{ \'trackToChat\' | translate }}</a></div><div class="track__upload-info">{{ \'trackUploadedBy\' | translate }}&nbsp; <a ng-click="openProfile(track.sid)">{{ track.s }}</a>&nbsp; <span am-time-ago="track.ut"></span></div></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div></div><div class="track__votes-block" ng-class="{ \'voted--up\': track.vote > 0, \'voted--down\': track.vote < 0 }" ng-show="load.signed"><md-button class="md-fab track__vote--down" aria-label="track-up" ng-click="voteDown(track.id)"><ng-md-icon icon="expand_more" size="24"></ng-md-icon></md-button><span class="track__rating">{{track.r}}</span><md-button class="md-fab track__vote--up" aria-label="track-down" ng-click="voteUp(track.id)"><ng-md-icon icon="expand_less" size="24"></ng-md-icon></md-button></div><div class="track__progress"><div class="track__progress-active" style="width:{{progress}}%;"></div></div></md-item></md-list></md-content><md-content class="playlist__content" scroll-glue="reverse"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in playlist track by track.id" class="playlist__track" style="order: {{reverse*100 - track.r}}"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt="" ng-click="data(track)"></div><div class="track__row"><div class="track__base"><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div><div class="track__additional"><div class="track__content"><div class="track__links"><a href="#" class="track__link">>vk</a> <a href="#" class="track__link">>muzebra</a> <a href="#" class="track__link" ng-click="trackToChat(track.id)">>{{ \'trackToChat\' | translate }}</a></div><div class="track__upload-info">{{ \'trackUploadedBy\' | translate }}&nbsp; <a ng-click="openProfile(track.sid)">{{ track.s }}</a>&nbsp; <span am-time-ago="track.ut"></span></div></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div></div><div class="track__votes-block" ng-class="{ \'voted--up\': track.vote > 0, \'voted--down\': track.vote < 0 }" ng-show="load.signed"><md-button class="md-fab track__vote--down" aria-label="track-up" ng-click="voteDown(track.id)"><ng-md-icon icon="expand_more" size="24"></ng-md-icon></md-button><span class="track__rating">{{track.r}}</span><md-button class="md-fab track__vote--up" aria-label="track-down" ng-click="voteUp(track.id)"><ng-md-icon icon="expand_less" size="24"></ng-md-icon></md-button></div></md-item></md-list></md-content></div>'),t.put("components/pluses/pluses.html",'<div class="pluses__ctrl" ng-controller="PlusesCtrl"><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt=""></div><div class="track__row"><div class="track__base"><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div><div class="track__additional"><div class="track__content"><div class="track__links"><a href="#" class="track__link">>vk</a> <a href="#" class="track__link">>muzebra</a> <a href="#" class="track__link" ng-click="trackToChat(track.id)">>{{ \'trackToChat\' | translate }}</a></div><div class="track__upload-info">{{ \'trackUploadedBy\' | translate }}&nbsp; <a ng-click="openProfile(track.sid)">{{ track.s }}</a>&nbsp; <span am-time-ago="track.ut"></span></div></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div></div></md-item></md-list></md-content></div>'),t.put("components/profile/profile.html",'<div class="profile__ctrl"><ng-switch on="profileTab" class="profile__tabpanel-container"><div role="tabpanel" id="tabUser-content" aria-labelledby="tabUser" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><div class="user__include" ng-include="\'components/user/user.html\'"></div></div><div role="tabpanel" id="tabUploads-content" aria-labelledby="tabUploads" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><div class="uploads__include" ng-include="\'components/uploads/uploads.html\'"></div></div><div role="tabpanel" id="tabPluses-content" aria-labelledby="tabPluses" ng-switch-when="2" md-swipe-left="next()" md-swipe-right="previous()"><div class="pluses__include" ng-include="\'components/pluses/pluses.html\'"></div></div><div role="tabpanel" id="tabMinuses-content" aria-labelledby="tabMinuses" ng-switch-when="3" md-swipe-left="next()" md-swipe-right="previous()"><div class="minuses__include" ng-include="\'components/minuses/minuses.html\'"></div></div><div role="tabpanel" id="tabSettings-content" aria-labelledby="tabSettings" ng-switch-when="4" md-swipe-left="next()" md-swipe-right="previous()" ng-show="isMe"><div class="settings__include" ng-include="\'components/settings/settings.html\'"></div></div></ng-switch><md-tabs class="md-accent" md-selected="profileTab"><md-tab ng-click="setProfileTab(0)" id="tabUser" aria-controls="tabUser-content"><span class="tabs__full">{{ \'profileUser\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="home" size="24"></ng-md-icon></span></md-tab><md-tab ng-click="setProfileTab(1)" id="tabUploads" aria-controls="tabUploads-content"><span class="tabs__full">{{ \'profileUploads\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="file_upload" size="24"></ng-md-icon></span></md-tab><md-tab ng-click="setProfileTab(2)" id="tabPluses" aria-controls="tabPluses-content"><span class="tabs__full">{{ \'profilePluses\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="thumb_up" size="24"></ng-md-icon></span></md-tab><md-tab ng-click="setProfileTab(3)" id="tabMinuses" aria-controls="tabMinuses-content"><span class="tabs__full">{{ \'profileMinuses\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="thumb_down" size="24"></ng-md-icon></span></md-tab><md-tab ng-click="setProfileTab(4)" id="tabSettings" aria-controls="tabSettings-content" ng-show="isMe"><span class="tabs__full">{{ \'profileSettings\' | translate }}</span> <span class="tabs__icon"><ng-md-icon icon="settings" size="24"></ng-md-icon></span></md-tab></md-tabs></div>'),t.put("components/settings/settings.html",'<div class="settings__ctrl" ng-controller="SettingsCtrl"><md-card class="settings__card"><div class="settings__logout"><md-button class="settings__logout-btn" aria-label="logout">{{ \'settingsLogOut\' | translate }}</md-button></div><div class="settings__chat"><md-checkbox ng-model="gender" ng-change="changeGender()" class="settings__female">{{ \'settingsFemale\' | translate }}</md-checkbox></div><div class="settings__password"><md-input-container class="settings__password--old"><label>{{ \'settingsOldPassword\' | translate }}</label> <input inputmode="latin" aria-label="settings-old-password" ng-model="oldPassword"></md-input-container><md-input-container class="settings__password--new"><label>{{ \'settingsNewPassword\' | translate }}</label> <input type="password" inputmode="latin" aria-label="settings-new-password" ng-model="newPassword"></md-input-container><md-input-container class="settings__password--new"><label>{{ \'settingsNewPasswordAgain\' | translate }}</label> <input type="password" inputmode="latin" aria-label="settings-new-password" ng-model="newPasswordFix" ng-enter="changePassword"></md-input-container><md-button ng-click="changePassword()" class="settings__password-btn" aria-label="change-password">{{ \'settingsNewPasswordSumbit\' | translate }}</md-button></div></md-card></div>'),t.put("components/upload/upload.html",'<md-bottom-sheet class="md-grid uploadbar"><md-button>Upload - Drag & Drop here!</md-button><md-list><md-item ng-repeat="item in items"><md-button class="md-grid-item-content" aria-label="{{item.name}}" ng-click="listItemClick($index)"><div class="md-icon-container"><md-inline-grid-icon icon="{{item.icon}}"></md-inline-grid-icon></div><p class="md-grid-text">111</p></md-button></md-item></md-list></md-bottom-sheet>'),t.put("components/uploads/uploads.html",'<div class="uploads__ctrl" ng-controller="UploadsCtrl"><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt=""></div><div class="track__row"><div class="track__base"><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div><div class="track__additional"><div class="track__content"><div class="track__links"><a href="#" class="track__link">>vk</a> <a href="#" class="track__link">>muzebra</a> <a href="#" class="track__link" ng-click="trackToChat(track.id)">>{{ \'trackToChat\' | translate }}</a></div><div class="track__upload-info">{{ \'trackUploadedBy\' | translate }}&nbsp; <a href="#" {{track.sid}}="">{{ track.s }}</a>&nbsp; <span am-time-ago="track.ut"></span></div></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div></div></div></md-item></md-list></md-content></div>'),t.put("components/user/user.html",'<div class="user__ctrl" ng-controller="UserCtrl"><md-card class="profile__main"><div class="user__nav"><div class="user_names-block"><span class="user__name">{{user.name}}</span> <span class="user__id">#{{user.id}}</span></div><div class="user__votes-block" ng-class="{ \'voted--up\': user.vote == \'plus\', \'voted--down\': user.vote == \'minus\' }"><md-button ng-click="userVoteDown(user.id)" class="md-fab user__vote--down" aria-label="user-minus" ng-show="!isMe"><ng-md-icon icon="expand_more" size="24"></ng-md-icon></md-button><span class="user__karma">{{user.karma}}</span><md-button ng-click="userVoteUp(user.id)" class="md-fab user__vote--up" aria-label="user-plus" ng-show="!isMe"><ng-md-icon icon="expand_less" size="24"></ng-md-icon></md-button></div></div><div class="user__main"><img class="user__img" ng-src="{{user.pic}}" alt=""><div class="user__additional"><p class="user__descripton" ng-bind-html="user.i"></p><p class="user__origin">{{ \'userRegDate\' | translate }} <span class="user__regdate">{{user.reg | date:\'d.MM.y\'}}</span> <span ng-show="user.invites.p.name">{{ \'userInvitedBy\' | translate }} <button class="user__father" ng-click="openProfile(user.invites.p.id)" aria-label="user-origin">{{user.invites.p.name}}</button></span></p><p class="user__invited" ng-show="user.invites.u.length">{{ \'userInvite\' | translate }} <span class="user__children" ng-repeat="child in user.invites.u"><button class="user__child" ng-click="openProfile(child.id)" aria-label="user-child">{{child.n}}</button></span></p></div></div><div class="user__control"><md-checkbox ng-model="data.img" aria-label="ОМММ" class="user__ignore">{{ \'userIgnore\' | translate }}</md-checkbox><md-button class="user__ban" aria-label="user-ban">{{ \'userBan\' | translate }}</md-button></div></md-card></div>')
}]);
